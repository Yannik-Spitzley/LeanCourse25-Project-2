## Project 2: Motzkin numbers: Definition, linear recursion, connection to Catalan numbers and generating function

## Overview

This project introduces the Motzkin numbers (https://oeis.org/A001006). They enumerate many combinatorial objects, for example the number of different ways of drawing non-intersecting chords between n points on a circle, where not necessarily every point has to be connected with a chord. They also have interesting connections to the Catalan numbers. Unlike the Catalan numbers, they are currently not yet implemented in Mathlib and make therefore a nice addition.


## Main results

We define the $ n $-th Motzkin number using a well-known recursion formula, that is very connected to its geometric characterization:

$$
  M_n = M_{n-1} + \sum _{i=0}^{n-2} M_i M_{n-2-i}.
$$

As mentioned earlier, the Motzkin numbers have a connection to the Catalan number, which we present by showing that each number can be expressed in terms of the other ones:

$$
  M_n = \sum _{k=0}^n \binom{n}{2k} C_k
$$

and

$$
  C_{n+1} = \sum _{k=0}^n \binom{n}{k} M_k.
$$

Note that the first identity slightly varies from the usual statement, where the sum only goes until $ \lfloor \frac{n}{2}\rfloor $, which is mathematically equivalent as the additional binomial coefficients are all $ 0 $. The proof uses standard techniques, but is not as straightforward as it might seem as multiple identities were required, which are not yet part of Mathlib.

These results can be used to prove a linear recursion for the Motzkin numbers

$$
  (n+2) M_n = (2n+1) M_{n-1} + (3n-3) M_{n-2}.
$$

The proof of this identity is complete up to minor algebraic reformulations.

Defining the generating function of the Motzkin numbers as

$$
  m(x) := \sum _{n=0}^\infty M_n x^n,
$$

we show the identity

$$
  m(x) = 1 + x m(x) + x^2 m(x)^2
$$

as well as the explicit form given by

$$
  (2 x^2 m(x) - (1-x)) ^2 = 1 - 2x - 3x^2.
$$


## AI Usage

Two AI models were tested in the development of this project:

* **ChatGPT:** Was barely used, mostly out of pure interest in its performance to the requests that Gemini has received earlier, but none of its suggestions were used.

* **Gemini:** Was used to assist in the generation of the theoretical (not Lean-related) proofs as the number of suitable references was fairly low. It was also used to sketch how more involved Lean techniques have to be applied (in theory) in order to follow the prepared proof structure. Most of those requests stayed theoretical as the Lean-code generated by Gemini contained a lot of errors and overcomplicated the code. The explicit modification (extension/shrinking) of sum ranges still follows (mostly) the way Gemini suggested.
